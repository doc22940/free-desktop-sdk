kind: autotools

depends:
  - filename: bootstrap-import.bst
  - filename: base/perl.bst
    type: build
  - filename: base/bison.bst
    type: build
  - filename: base/pkg-config.bst
    type: build
  - filename: base/e2fsprogs.bst
    type: build

public:
  bst:
    split-rules:
      devel:
        (>):
          - "%{libdir}/libcom_err.so"
          - "%{libdir}/libgssapi_krb5.so"
          - "%{libdir}/libgssrpc.so"
          - "%{libdir}/libk5crypto.so"
          - "%{libdir}/libkadm5clnt_mit.so"
          - "%{libdir}/libkadm5clnt.so"
          - "%{libdir}/libkadm5srv_mit.so"
          - "%{libdir}/libkadm5srv.so"
          - "%{libdir}/libkdb5.so"
          - "%{libdir}/libkrad.so"
          - "%{libdir}/libkrb5.so"
          - "%{libdir}/libkrb5support.so"
          - "%{libdir}/libverto.so"

variables:
  conf-local: |
    --with-system-et \
    --with-system-ss

config:
  configure-commands:
    - |
      mkdir "%{builddir}"
      cd "%{builddir}"
      ../src/%{configure}

sources:
  - kind: tar
    url: https://kerberos.org/dist/krb5/1.16/krb5-1.16.1.tar.gz
    ref: 214ffe394e3ad0c730564074ec44f1da119159d94281bbec541dc29168d21117
